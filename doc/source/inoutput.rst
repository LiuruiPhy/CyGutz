Main executable, input and output files 
=======================================

There are three main executable files, namely, ``dmft``, ``CyGutz`` and ``dmft2``.

``dmft``
--------

``dmft`` is the executable file generated by compiling the source files
in directory ``ksum`` of the Wien2K interface. 
It is a modified version of the Kristjan Haule's DMFT-Wien2K interface.
It is modified by Yongxin Yao.

**Input files**

In addition to the input files generated by Wien2K, 
the ONLY input file needed is ``case.indmfl``.
Many of the other input files for the original ``dmft`` are not needed.


**Output files**

For the specific purpose of LDA+G-RISB, 
the output files generated by the modified version of ``dmft`` 
are completely different from the original version. 
These output files are the input files for ``CyGutz``, 
which are supposed to be generated by ``dmft`` only.
Any manual modifications have to be done with great caution.
The detailed format of the files can be located in the ``GUTZ_LINK.F`` 
in directory ``ksum`` of the Wien2K interface.

* ``GUTZ1.INP``
    Single line file with two integers in free format.

    * The first integer gives the total number of atoms 
      in the ``case.struct`` file. 
    * The second is always 1, indicating atomic Rydberg units 
      used in Wien2K.

* ``GUTZ2.INP``
    Single line file with four integers in free format.

    * The first integer indicates whether spin-orbit interaction 
      is included.
 
      * 1: no spin-orbit interaction
      * 2: with spin-orbit interaction.
    * The second integer indicates whether the spin is restricted or not.

      * 1: spin-restricted calculation; 
      * 2: spin-unrestricted (polarized) calculation.
    * The third integer gives the maximal number of bands across 
      all the k-points.
    * The fourth integer gives the total number of k-points.

* ``GUTZ3.INP``
    Multiple-line file storing the symmetry operations. 
    It begins with an integer as the total number of operations, 
    followed by the operation matrices.

* ``GUTZ4.INP``
    Multiple-line file storing the list of unitary transformation matrices, 
    which transforms the local correlated `d/f`-orbitals 
    from complex spherical harmonics representations 
    to the representation specified in ``case.indmfl``. 
    The options are restricted to either complex spherical harmonics 
    or relativistic harmonics.
    It begins with a line specifying the maximal dimension of the
    correlated orbitals across all the correlated atoms
    and total number of correlated atom, followed by the list of 
    complex transformation matrices.

* ``GUTZ5.INP``
    Multiple-line file storing the k-points information, 
    total number of electrons, Brillouine zone integration method,etc.

    * It starts with a line which gives the total number of k-points.
    * The following lines give the list of k-point weights.
    * A line followed specifies the Brillouine zone integration method 
      and smearing factor. 

      *  0: Gaussian smearing
      * -5: linear tetrahedron method
      * -1: Fermi smearing
    * Next line specifies the total number of electrons in the unit cell.
    * The lines followed give the list of band windows (ne[3,nkpts]) 
      for the construction of 
      local correlated `d/f`-orbitals at all the k-points. 

      * ne[1,:]: total number of bands at each k-point; 
      * ne[2/3:]: the first/last band included to expand 
        the local `d/f`-orbitals.
    * Next line give the name of ``case.kgen`` file.
    * Next line gives the total number of k-points for the following 
      k-point coordinates and labels.
    * Final lines give k-point coordinates and labels.
    
* ``GMPI_myrank.INP``
    This file is generated for each processor involved in the 
    LDA calculations, with a different label `myrank`. 

    * The first line specifies the rank of the current processor, 
      total number of processors, master processor, 
      whether vector_para is used, and number of vectors.
    * if vector_para is used, the following lines give the 3 indices 
      for each vector: the ID of the vector, 
      number of k-points involved in the vector and starting index of 
      the k-point group.

* ``BNDU_myrank.INP``
    This binary file is generated for each processor involved 
    in the LDA calculations, with a different label `myrank`. 
    It give the LDA eigen-values and the expansion coefficients of the 
    correlated `d/f`-orbitals in the basis of the LDA wave functions 
    for every symmetry rotations and k-points in the group.


``CyGutz``
----------

``CyGutz`` is the executable file generated by compiling the source files 
in directory ``Gutzwiller_Slave_Boson_Solver/SRC_cmplx``. 
It is developed by Yongxin Yao, Nicola Lanata, Gabriel Kotliar,
Cai-Zhuang Wang, and Kai-Ming Ho. 

**Input files**

Besides the input files generated by ``dmft`` as listed above, 
The ``init_ga.py`` also generates several input files for ``CyGutz``.

* ``GL.INP``
    Multiple-line file contains the key control parameters of ``CyGutz``. 
    Since there is comments for each line in that file 
    and explanations are also when running ``init_ga.py``, 
    I would repeat here.

* ``WH_HS.INP``
    File storing the list of hermitian matrix basis set compatible with 
    local rotation operations. The basis set is used to expand all the 
    local quantities.

* ``WH_SIGMA_STRUCT.INP``
    File storing the list of self-energy structures.

* ``WH_N2N.INP``
    File storing the list of additional unitary transformations 
    which transforms the local `d/f`-orbitals from the representation 
    specified in ``case.indmfl`` to the symmetry-adapted representation.

Some input file will be generated after the first execution of ``CyGutz``,
to provide possibly better `initial guess` of the G-RISB equations.

* ``GL_NELF1.INP``
    File storing the list of number of local `d/f`-electrons 
    for interaction double counting.

* ``WH_RLNEF.INP``
    File storing the solution {R, :math:`\lambda`} of the G-RISB equation.

**Output files**

* ``GUTZ.LOG`` 
    Main ``CyGutz`` output text file. It contains some detailed information 
    at each cycle of the G-RISB solution. Important local quantities, energies,
    valence block histograms, etc., are printed. The file will be renamed
    to ``GL_LOG.OUT`` before the next charge iteration.

* ``KSWT_myrank.DAT``
    This binary file is generated for each processor involved 
    in the calculation. It stores the renormalized occupation matrix of the 
    LDA bands for every symmetry rotations and k-points in the group.

* ``WH_RLNEF.OUT``
    File storing the solution {R, :math:`\lambda`} of the G-RISB equation.

* ``WH_EL0.OUT``
    File storing the list of one-body part of the local Hamiltonians.

``dmft2``
---------

``dmft2`` is the executable file generated by compiling the source files
in directory ``chargesc`` of the Wien2K interface.
It updates the electron density like lapw2 in Wien2K.
It is a modified version of the Kristjan Haule's DMFT-Wien2K interface.
It is modified by Yongxin Yao.

**Input files**

Besides the input files generated by Wien2K, it also needs 
the ``KSWT_myrank.DAT`` file.
